<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Invito per un Weekend</title>
  <style>
    :root {
      --bg: #0d0b09;
      --card: #17130f;
      --stroke: #2b241e;
      --text: #f3ede6;
      --muted: #c9beb2;
      --accent: #c8b08e;
      --accent-ink: #1a1410;
      --radius: 18px;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Optima", "Candara", "Trebuchet MS", "Segoe UI", sans-serif;
      background:
        radial-gradient(120% 120% at 20% 10%, rgba(255,255,255,0.05), transparent 60%),
        radial-gradient(120% 120% at 80% 0%, rgba(255,255,255,0.03), transparent 55%),
        var(--bg);
      color: var(--text);
      letter-spacing: 0.01em;
    }
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background-image:
        linear-gradient(90deg, rgba(255,255,255,0.03) 0, rgba(255,255,255,0.03) 1px, transparent 1px, transparent 8px),
        radial-gradient(rgba(255,255,255,0.04) 0.5px, transparent 0.5px);
      background-size: 8px 8px, 3px 3px;
      opacity: 0.35;
      pointer-events: none;
    }
    .wrap { max-width: 560px; margin: 0 auto; padding: 0 20px 56px; }
    .panel {
      position: relative;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent 55%), var(--card);
      border: 1px solid var(--stroke);
      border-radius: var(--radius);
      padding: 24px 20px;
      box-shadow: 0 18px 50px rgba(0,0,0,.35);
    }
    .panel + .panel { margin-top: 18px; }
    .eyebrow {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.2em;
      color: #b7aca0;
    }
    h1, h2 {
      font-family: "Iowan Old Style", "Palatino Linotype", "Book Antiqua", "Times New Roman", serif;
      font-weight: 500;
      letter-spacing: 0.01em;
      margin: 12px 0 10px;
    }
    h1 { font-size: 28px; }
    h2 { font-size: 18px; margin-top: 6px; }
    p { margin: 10px 0; color: var(--muted); line-height: 1.6; }
    .lead { font-size: 15px; color: #e2d7cc; }
    .small { font-size: 12px; color: #a89f94; margin-top: 12px; }
    .grid { display: grid; gap: 16px; margin-top: 18px; }
    .row { display: grid; gap: 16px; }
    label {
      display: block;
      font-size: 11px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: #b9b1a7;
      margin-bottom: 8px;
    }
    input, select, textarea {
      width: 100%;
      padding: 12px 14px;
      border-radius: 14px;
      border: 1px solid var(--stroke);
      background: #120e0b;
      color: var(--text);
      font: inherit;
      outline: none;
      transition: border-color 200ms ease, box-shadow 200ms ease;
    }
    select {
      appearance: none;
      background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='none' stroke='%23c9beb2' stroke-width='1.4' stroke-linecap='round' stroke-linejoin='round'><path d='M6 9l6 6 6-6'/></svg>");
      background-repeat: no-repeat;
      background-position: right 12px center;
      padding-right: 40px;
    }
    textarea { min-height: 120px; resize: vertical; }
    input:focus, select:focus, textarea:focus {
      border-color: #3a3128;
      box-shadow: 0 0 0 3px rgba(199,176,140,0.15);
    }
    ::placeholder { color: #8f867d; }
    .btns { display: flex; gap: 12px; flex-wrap: wrap; margin-top: 20px; }
    button {
      border: 1px solid transparent;
      border-radius: 12px;
      padding: 12px 16px;
      cursor: pointer;
      background: var(--accent);
      color: var(--accent-ink);
      font-weight: 600;
      letter-spacing: 0.02em;
      transition: transform 160ms ease, box-shadow 160ms ease;
    }
    button:hover { transform: translateY(-1px); box-shadow: 0 10px 24px rgba(0,0,0,0.25); }
    button:focus-visible { outline: 2px solid #3a3128; outline-offset: 2px; }
    button.secondary {
      background: transparent;
      color: var(--text);
      border-color: var(--stroke);
      box-shadow: none;
    }
    .locked { overflow: hidden; }
    .gate {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(8, 7, 6, 0.8);
      backdrop-filter: blur(6px);
      z-index: 10;
      transition: opacity 300ms ease;
    }
    .gate.hidden {
      opacity: 0;
      pointer-events: none;
    }
    .gate-card {
      width: min(360px, 90vw);
      background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent 60%), var(--card);
      border: 1px solid var(--stroke);
      border-radius: 16px;
      padding: 22px 20px;
      box-shadow: 0 20px 50px rgba(0,0,0,0.45);
    }
    .gate-form {
      display: grid;
      gap: 12px;
      margin-top: 12px;
    }
    .gate-form button { width: 100%; }
    .gate-msg { min-height: 16px; }
    .gate-msg.error { color: #d7a7a0; }
    .status { margin-top: 14px; min-height: 18px; }
    .ok { color: var(--accent); }
    .hero-slider {
      position: relative;
      height: 82vh;
      min-height: 420px;
      max-height: 720px;
      margin: 0 -20px 18px;
      border-radius: 0 0 24px 24px;
      overflow: hidden;
      background: #0b0907;
      cursor: grab;
    }
    .hero-slider.dragging { cursor: grabbing; }
    .hero-slider::after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(180deg, rgba(10,8,7,0.05) 0%, rgba(10,8,7,0.25) 60%, rgba(10,8,7,0.8) 100%);
      z-index: 1;
    }
    .slide {
      position: absolute;
      inset: 0;
      background-image: var(--img);
      background-size: cover;
      background-position: center;
      opacity: 0;
      transition: opacity 1200ms ease;
    }
    .slide.active { opacity: 1; }
    .slider-caption {
      position: absolute;
      left: 20px;
      right: 20px;
      bottom: 22px;
      z-index: 2;
      max-width: 420px;
    }
    .slider-caption h2 { margin: 8px 0 0; }
    .slider-caption p { margin: 8px 0 0; color: #d9cfc3; }
    .slider-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      z-index: 2;
      width: 40px;
      height: 40px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.25);
      background: rgba(9,7,6,0.55);
      color: #f3ede6;
      display: grid;
      place-items: center;
      cursor: pointer;
      backdrop-filter: blur(4px);
    }
    .slider-btn:hover {
      background: rgba(9,7,6,0.75);
      transform: translateY(-50%);
      box-shadow: none;
    }
    .slider-btn.prev { left: 14px; }
    .slider-btn.next { right: 14px; }
    @media (min-width: 560px) {
      .row { grid-template-columns: 1fr 1fr; }
      h1 { font-size: 32px; }
      .hero-slider {
        margin: 0 0 22px;
        border-radius: 24px;
      }
    }
    @media (prefers-reduced-motion: reduce) {
      .slide { transition: none; }
    }
  </style>
</head>
<body class="locked">
  <div id="gate" class="gate" role="dialog" aria-modal="true" aria-labelledby="gate-title">
    <div class="gate-card">
      <div class="eyebrow">Accesso riservato</div>
      <h2 id="gate-title">Inserisci la password</h2>
      <p class="small">Serve solo per validare il voucher.</p>
      <form id="gate-form" class="gate-form">
        <label for="gate-pass">Password</label>
        <input id="gate-pass" type="password" autocomplete="current-password" placeholder="********" required />
        <button type="submit">Entra</button>
        <div id="gate-msg" class="small gate-msg" aria-live="polite"></div>
      </form>
    </div>
  </div>
  <div class="wrap">
    <div class="hero-slider" aria-label="Galleria di ricordi">
      <!-- Sostituisci foto-1.jpg, foto-2.jpg, foto-3.jpg con le vostre immagini. -->
      <div class="slide active" style="--img: url('img/foto-1.png');" role="img" aria-label="Foto nostra 1"></div>
      <div class="slide" style="--img: url('img/foto-2.png');" role="img" aria-label="Foto nostra 2"></div>
      <div class="slide" style="--img: url('img/foto-3.jpeg');" role="img" aria-label="Foto nostra 3"></div>
      <div class="slide" style="--img: url('img/foto-4.jpeg');" role="img" aria-label="Foto nostra 4"></div>
      <div class="slide" style="--img: url('img/foto-5.jpeg');" role="img" aria-label="Foto nostra 5"></div>
      <button class="slider-btn prev" type="button" aria-label="Immagine precedente">&lt;</button>
      <button class="slider-btn next" type="button" aria-label="Immagine successiva">&gt;</button>
      <div class="slider-caption">
        <div class="eyebrow">Per te</div>
        <h2>Un regalo pensato per farti stare bene.</h2>
        <p>Dopo 9 mesi vivremo insieme la nostra famiglia ü§ç</p>
      </div>
    </div>

    <div class="panel">
      <div class="eyebrow">Per te, e per noi</div>
      <h1>Un weekend fuori porta, quando ti andr√†.</h1>
      <p class="lead">
        Questo √® un regalo per staccare, respirare, sentirti leggera. Io mi occupo di tutto: cercare, prenotare, organizzare. Tu dimmi solo cosa ti farebbe stare bene ‚ú®
      </p>
      <p class="small">Sar√† un uscita fuori porta tra noi + Clara üíõ Senza fretta. Senza dover decidere tutto subito.</p>
      <p class="small">Codice privato: <b id="code"></b></p>
    </div>

    <div class="panel">
      <h2>Dimmi cosa ti va davvero.</h2>
      <p class="small">Rispondi come ti viene. Non ci sono risposte giuste üòä</p>

      <div class="grid">
        <div class="row">
          <div>
            <label>Quando ti piacerebbe partire?</label>
            <select id="periodo">
              <option value="Appena ci sentiamo pronti">Appena ci sentiamo pronti</option>
              <option value="Tra qualche mese">Tra qualche mese</option>
              <option value="Quando Clara sar√† un po‚Äô pi√π grande">Quando Clara sar√† un po‚Äô pi√π grande</option>
              <option value="Decidilo tu per me üòå">Decidilo tu per me üòå</option>
            </select>
          </div>
          <div>
            <label>Quanto tempo vorresti?</label>
            <select id="notti">
              <option value="Solo una notte">Solo una notte</option>
              <option value="Due notti (default)" selected>Due notti (default)</option>
              <option value="Pi√π tempo possibile üòÑ">Pi√π tempo possibile üòÑ</option>
            </select>
          </div>
        </div>

        <div>
          <label>Che atmosfera sogni?</label>
          <select id="stile">
            <option value="Relax totale (spa, silenzio, lentezza)">Relax totale (spa, silenzio, lentezza)</option>
            <option value="Natura e aria buona">Natura e aria buona</option>
            <option value="Passeggiare, mangiare bene, scoprire">Passeggiare, mangiare bene, scoprire</option>
            <option value="Non voglio pensarci, sorprendimi üí´">Non voglio pensarci, sorprendimi üí´</option>
          </select>
        </div>

        <div class="row">
          <div>
            <label>Quanto lontano ti va di andare?</label>
            <select id="distanza">
              <option value="Vicino, basta cambiare aria">Vicino, basta cambiare aria</option>
              <option value="Un po‚Äô pi√π lontano">Un po‚Äô pi√π lontano</option>
              <option value="Dove serve per stare bene">Dove serve per stare bene</option>
            </select>
          </div>
          <div>
            <label>Sul budget fidati di me üòâ</label>
            <select id="budget">
              <option value="Fidati tu">Fidati tu</option>
              <option value="Indicativamente medio">Indicativamente medio</option>
              <option value="Non voglio saperlo üôà">Non voglio saperlo üôà</option>
            </select>
          </div>
        </div>

        <div>
          <label>C‚Äô√® qualcosa che desideri davvero?</label>
          <textarea id="note" placeholder="Riposo, dormire tanto, non correre, mangiare bene, silenzio‚Ä¶ o qualsiasi cosa ti venga in mente üí≠"></textarea>
        </div>
      </div>

      <div class="btns">
        <button id="save">Salva üíõ</button>
        <button class="secondary" id="wa">Mandami tutto</button>
        <button class="secondary" id="reset">Rifacciamo con calma</button>
      </div>

      <div id="status" class="small status"></div>
      <div class="small">Questo regalo non scade. Aspetta solo il momento giusto per te üåø</div>
    </div>
  </div>

<script>
  const $ = (id) => document.getElementById(id);

  const gate = $("gate");
  const gateForm = $("gate-form");
  const gatePass = $("gate-pass");
  const gateMsg = $("gate-msg");
  const gateKey = "love25";

  const fields = ["periodo","notti","stile","distanza","budget","note"];
  const key = "voucher_weekend_pref_v1";

  // generate friendly code
  const code = "WFPN-" + new Date().getFullYear() + "-" + String(Math.floor(Math.random()*900)+100);
  $("code").textContent = code;

  function getData() {
    const data = { code };
    fields.forEach(f => data[f] = $(f).value);
    return data;
  }

  function setStatus(msg, ok=false){
    $("status").innerHTML = ok ? `<span class="ok">${msg}</span>` : msg;
  }

  function saveLocal(){
    const data = getData();
    localStorage.setItem(key, JSON.stringify(data));
    setStatus("Preferenze salvate.", true);
  }

  function loadLocal(){
    const raw = localStorage.getItem(key);
    if(!raw) return;
    try {
      const data = JSON.parse(raw);
      fields.forEach(f => { if(data[f] != null) $(f).value = data[f]; });
      setStatus("Preferenze caricate.", true);
    } catch(e){}
  }

  function resetAll(){
    localStorage.removeItem(key);
    $("note").value = "";
    setStatus("Preferenze cancellate. Puoi ricominciare.", true);
  }

  function sendWhatsApp(){
    const d = getData();
    const text =
`Invito per un weekend
Codice: ${d.code}

Periodo: ${d.periodo}
Notti: ${d.notti}
Atmosfera: ${d.stile}
Distanza: ${d.distanza}
Budget: ${d.budget}

Note: ${d.note || "Nessuna indicazione aggiuntiva."}`;
    const url = "https://wa.me/?text=" + encodeURIComponent(text);
    window.open(url, "_blank");
  }

  const slides = Array.from(document.querySelectorAll(".slide"));
  const heroSlider = document.querySelector(".hero-slider");
  const prevBtn = document.querySelector(".slider-btn.prev");
  const nextBtn = document.querySelector(".slider-btn.next");
  const prefersReducedMotion = window.matchMedia("(prefers-reduced-motion: reduce)").matches;
  let index = slides.findIndex((slide) => slide.classList.contains("active"));
  if (index < 0) index = 0;
  let autoTimer = null;

  function showSlide(nextIndex) {
    if (!slides.length) return;
    slides[index].classList.remove("active");
    index = (nextIndex + slides.length) % slides.length;
    slides[index].classList.add("active");
  }

  function nextSlide() { showSlide(index + 1); }
  function prevSlide() { showSlide(index - 1); }

  function startAuto() {
    if (slides.length > 1 && !prefersReducedMotion) {
      autoTimer = setInterval(nextSlide, 5200);
    }
  }

  function resetAuto() {
    if (!autoTimer) return;
    clearInterval(autoTimer);
    startAuto();
  }

  if (prevBtn && nextBtn) {
    prevBtn.addEventListener("click", () => {
      prevSlide();
      resetAuto();
    });
    nextBtn.addEventListener("click", () => {
      nextSlide();
      resetAuto();
    });
  }

  if (heroSlider && slides.length > 1) {
    let dragStartX = null;
    heroSlider.addEventListener("pointerdown", (event) => {
      if (event.target.closest(".slider-btn")) return;
      dragStartX = event.clientX;
      heroSlider.setPointerCapture(event.pointerId);
      heroSlider.classList.add("dragging");
    });
    heroSlider.addEventListener("pointerup", (event) => {
      if (dragStartX === null) return;
      const delta = event.clientX - dragStartX;
      dragStartX = null;
      heroSlider.classList.remove("dragging");
      if (Math.abs(delta) > 40) {
        delta < 0 ? nextSlide() : prevSlide();
        resetAuto();
      }
    });
    heroSlider.addEventListener("pointercancel", () => {
      dragStartX = null;
      heroSlider.classList.remove("dragging");
    });
  }

  startAuto();

  $("save").addEventListener("click", saveLocal);
  $("wa").addEventListener("click", sendWhatsApp);
  $("reset").addEventListener("click", resetAll);

  gateForm.addEventListener("submit", (event) => {
    event.preventDefault();
    if (gatePass.value === gateKey) {
      gate.classList.add("hidden");
      gate.setAttribute("aria-hidden", "true");
      document.body.classList.remove("locked");
      gateMsg.textContent = "";
      gateMsg.classList.remove("error");
      gatePass.value = "";
      return;
    }
    gateMsg.textContent = "Password errata, riprova.";
    gateMsg.classList.add("error");
    gatePass.value = "";
    gatePass.focus();
  });

  gatePass.addEventListener("input", () => {
    gateMsg.textContent = "";
    gateMsg.classList.remove("error");
  });

  loadLocal();
  gatePass.focus();
</script>
</body>
</html>
